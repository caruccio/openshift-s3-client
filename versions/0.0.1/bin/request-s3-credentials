#!/bin/bash

#TODO:
# - ask credential server for new credentials
# - register env vars with credentials
function create-s3-iam-user()
{
	local AWS_ACCESS_KEY_ID=XXX_AWS_ACCESS_KEY_ID
	local AWS_SECRET_ACCESS_KEY=XXX_AWS_SECRET_ACCESS_KEY
	local AWS_BUCKET_NAME=XXX_AWS_BUCKET_NAME

	echo "$AWS_ACCESS_KEY_ID" > env/OPENSHIFT_AWS_ACCESS_KEY_ID
	echo "$AWS_SECRET_ACCESS_KEY" > env/OPENSHIFT_AWS_SECRET_ACCESS_KEY
	echo "$AWS_BUCKET_NAME" > env/OPENSHIFT_AWS_BUCKET_NAME

	cat <<-EOF
		Your AWS S3 credentials:

		OPENSHIFT_AWS_ACCESS_KEY_ID:     $OPENSHIFT_AWS_ACCESS_KEY_ID
		OPENSHIFT_AWS_SECRET_ACCESS_KEY: $OPENSHIFT_AWS_SECRET_ACCESS_KEY
		OPENSHIFT_AWS_BUCKET_NAME:       $OPENSHIFT_AWS_BUCKET_NAME
	EOF

	return 0
}
